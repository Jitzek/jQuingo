(self.webpackChunkjquingo=self.webpackChunkjquingo||[]).push([[826],{7661:(t,e,n)=>{"use strict";var r=n(9755),o=n(1036),i=n(6486),s=function(){function t(t){this.value=t,this.rendered=!1}return t.prototype.render=function(t){r(t).append(o(this.value,{allowedTags:[],allowedAttributes:{},selfClosing:[],disallowedTagsMode:"escape"})),this.prev=(0,i.clone)(this)},t.prototype.update=function(e){if(!(this.prev instanceof t))return r(e).contents().replaceWith(""),void this.render(e);this.value!==this.prev.value&&(console.log("hello"),r(e).contents().replaceWith(o(this.value,{allowedTags:[],allowedAttributes:{},selfClosing:[],disallowedTagsMode:"escape"}))),this.prev=(0,i.clone)(this)},t.prototype.remove=function(){this.value=""},t}(),h=function(){function t(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this.prev_children=[],this.rendered=!1,this.type=t.toLowerCase(),this.props=e,this.children=n}return t.prototype.render=function(t){var e=this;this.element=document.createElement(this.type),r(this.element).attr(this.props),this.children.forEach((function(t){t.render(e.element)})),r(t).append(this.element),this.rendered=!0,this.children.forEach((function(t){return t.rendered=!0})),this.prev=(0,i.clone)(this)},t.prototype.update=function(e){var n;this.rendered||this.render(e),this.prev instanceof t&&this.type===this.prev.type||(console.info("something's type was changed"),this.reload()),r(this.element).attr(this.props);for(var o=0;o<this.children.length||o<this.prev_children.length;o++)this.children[o]&&this.prev_children[o]&&(this.children[o]instanceof t&&this.prev_children[o]instanceof t&&this.children[o].type!==this.prev_children[o].type||this.children[o]instanceof s&&this.prev_children[o]instanceof s&&this.children[o].value!==this.prev_children[o].value)&&(console.info("node was removed"),this.reload()),null===(n=this.children[o])||void 0===n||n.update(this.element);this.prev=(0,i.clone)(this),this.prev.children=(0,i.clone)(this.children),this.prev_children=(0,i.clone)(this.children)},t.prototype.remove=function(){r(this.element).remove()},t.prototype.reload=function(){var t=document.createElement(this.type);this.children.forEach((function(e){return e.render(t)})),r(this.element).replaceWith(t),this.element=t},t}(),c=function(){function t(){this.nodes=[],this._prev_template="",this.init()}return t.prototype.init=function(){},t.prototype.template=function(){return""},t.prototype.render=function(){var t,e=this.template();if(e!==this._prev_template){for(;this.nodes.length>0;)null===(t=this.nodes.pop())||void 0===t||t.remove();this._prev_template=e}return this.nodes.length<1&&(this.nodes=f.createNode(e,void 0)),this.nodes},t}(),u=function(){function t(t){this._callbacks=new Map,this._value=t}return t.prototype.get=function(){return this._value},t.prototype.set=function(t){this._value=t,this.notify()},t.prototype.update=function(t){t(this._value),this.notify()},t.prototype.subscribe=function(t){var e=this._getAvailableIdentifier();return this._callbacks.set(e,t),t(this._value),e},t.prototype._getAvailableIdentifier=function(t){return void 0===t&&(t=0),this._callbacks.has(t)?this._getAvailableIdentifier(t+1):t},t.prototype.unsubscribe=function(t){this._callbacks.delete(t)},t.prototype.notify=function(){var t=this;this._callbacks.forEach((function(e){e(t._value)}))},t}(),l=new(function(){function t(){this.routes=[],this.current_route=new u(this.routes[0])}return t.prototype.pathExists=function(t){return void 0!==this.routes.find((function(e){return e.path===t}))},t.prototype.routeTo=function(t){history.pushState(null,"",t);var e=window.location.pathname;return this.setRoute(e)},t.prototype.addRoute=function(t){return!this.pathExists(t.path)&&(this.routes.push(t),!0)},t.prototype.removeRoute=function(t){return!!this.pathExists(t)&&(this.routes.splice(this.routes.indexOf(this.routes.find((function(e){return e.path===t}))),1),!0)},t.prototype.setRoute=function(t){return!!this.pathExists(t)&&(this.current_route.set(this.routes.find((function(e){return e.path===t}))),!0)},t}());r(window).on({popstate:function(t){l.setRoute(window.location.pathname)}}),r(document).on({DOMContentLoaded:function(t){l.setRoute(window.location.pathname)},click:function(t){t.target instanceof HTMLAnchorElement&&(t.preventDefault(),l.routeTo(t.target.href))}});var a,p=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.test="Hello World",e}return p(e,t),e.prototype.init=function(){var t=this;setTimeout((function(){t.test="Something else"}),1e3)},e.prototype.testf=function(){console.log("test")},e.prototype.template=function(){return"\n            ".concat(l.current_route.get().render(),"\n        ")},e}(c)),f=function(){function t(){}return t.createNode=function(t,e){var n=t?(new DOMParser).parseFromString(t,"text/html").children[0].children[1]:e;if(!n)return[];if(n.children.length<1)return[u=new s(r(n).text())];for(var o=[],i=0;i<n.children.length;i++){for(var c=n.children[i],u=new h(c.tagName,{}),l=0;l<c.attributes.length;l++)u.props[c.attributes[l].nodeName]=c.attributes[l].nodeValue||"";u.children=u.children.concat(this.createNode(void 0,c)),o.push(u)}return o},t.prototype.renderLoop=function(t){var e=this;d.render().forEach((function(e){e.update(t)})),requestIdleCallback((function(){return e.renderLoop(t)}))},t}();(new f).renderLoop(document.body)},2868:()=>{},4777:()=>{},9830:()=>{},209:()=>{},7414:()=>{}},t=>{t.O(0,[216],(()=>(7661,t(t.s=7661)))),t.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0UsVUFBWTFFLEVBQU15RSxXQUFXRCxHQUFHRyxXQUFhLEdBRzlFTixFQUFLNUUsU0FBVzRFLEVBQUs1RSxTQUFTbUYsT0FBT3JHLEtBQUt1QyxnQkFBV0MsRUFBV2YsSUFHaEVPLEVBQU11QyxLQUFLdUIsR0FHYixPQUFPOUQsR0FHRixZQUFBc0UsV0FBUCxTQUFrQnhHLEdBQWxCLFdBQ0V1RixFQUFJeEYsU0FBUzBCLFNBQVEsU0FBQXVFLEdBQ25CQSxFQUFLdkYsT0FBT1QsTUFJZHlHLHFCQUFvQixXQUFNLFNBQUtELFdBQVd4RyxPQUU5QyxFQXpDQSxJQ0hnQixJQUFJd0MsR0FFWmdFLFdBQVdsRixTQUFTb0YsTyIsInNvdXJjZXMiOlsid2VicGFjazovL2pxdWluZ28vLi9zcmMvanF1aW5nby9jb21wb25lbnQvdGV4dF9ub2RlLnRzIiwid2VicGFjazovL2pxdWluZ28vLi9zcmMvanF1aW5nby9jb21wb25lbnQvY29tcG9uZW50X25vZGUudHMiLCJ3ZWJwYWNrOi8vanF1aW5nby8uL3NyYy9qcXVpbmdvL2NvbXBvbmVudC9jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vanF1aW5nby8uL3NyYy9qcXVpbmdvL29ic2VydmFibGVfdmFsdWUudHMiLCJ3ZWJwYWNrOi8vanF1aW5nby8uL3NyYy9qcXVpbmdvL3JvdXRlci9yb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vanF1aW5nby8uL3NyYy9BcHAudHMiLCJ3ZWJwYWNrOi8vanF1aW5nby8uL3NyYy9qcXVpbmdvL2pRdWluZ28udHMiLCJ3ZWJwYWNrOi8vanF1aW5nby8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqUXVpbmdvTm9kZSB9IGZyb20gXCIuL25vZGVcIjtcbmltcG9ydCAqIGFzICQgZnJvbSBcImpxdWVyeVwiO1xuaW1wb3J0ICogYXMgc2FuaXRpemVIdG1sIGZyb20gXCJzYW5pdGl6ZS1odG1sXCI7XG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gXCJsb2Rhc2hcIjtcblxuZXhwb3J0IGNsYXNzIGpRdWluZ29UZXh0Tm9kZSBpbXBsZW1lbnRzIGpRdWluZ29Ob2RlIHtcbiAgcHVibGljIHByZXYhOiBqUXVpbmdvTm9kZTtcbiAgcHVibGljIHJlbmRlcmVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHZhbHVlOiBzdHJpbmcpIHt9XG5cbiAgcHVibGljIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgJChjb250YWluZXIpLmFwcGVuZChcbiAgICAgIHNhbml0aXplSHRtbCh0aGlzLnZhbHVlLCB7XG4gICAgICAgIGFsbG93ZWRUYWdzOiBbXSxcbiAgICAgICAgYWxsb3dlZEF0dHJpYnV0ZXM6IHt9LFxuICAgICAgICBzZWxmQ2xvc2luZzogW10sXG4gICAgICAgIGRpc2FsbG93ZWRUYWdzTW9kZTogXCJlc2NhcGVcIixcbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLnByZXYgPSBjbG9uZSh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIENoZWNrIGlmIG5vZGUgdHlwZSBoYXNuJ3QgY2hhbmdlZFxuICAgIGlmICghKHRoaXMucHJldiBpbnN0YW5jZW9mIGpRdWluZ29UZXh0Tm9kZSkpIHtcbiAgICAgIC8vIFJlbW92ZSB2YWx1ZSBmcm9tIFVJIChwYXJlbnQpXG4gICAgICAkKGNvbnRhaW5lcikuY29udGVudHMoKS5yZXBsYWNlV2l0aChcIlwiKTtcbiAgICAgIC8vIFBlcmZvcm0gYW4gaW5pdGlhbCByZW5kZXJcbiAgICAgIHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIENoZWNrIGlmIHZhbHVlIGhhc24ndCBjaGFuZ2VkXG4gICAgaWYgKHRoaXMudmFsdWUgIT09IHRoaXMucHJldi52YWx1ZSkge1xuICAgICAgY29uc29sZS5sb2coXCJoZWxsb1wiKTtcbiAgICAgICQoY29udGFpbmVyKVxuICAgICAgICAuY29udGVudHMoKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgc2FuaXRpemVIdG1sKHRoaXMudmFsdWUsIHtcbiAgICAgICAgICAgIGFsbG93ZWRUYWdzOiBbXSxcbiAgICAgICAgICAgIGFsbG93ZWRBdHRyaWJ1dGVzOiB7fSxcbiAgICAgICAgICAgIHNlbGZDbG9zaW5nOiBbXSxcbiAgICAgICAgICAgIGRpc2FsbG93ZWRUYWdzTW9kZTogXCJlc2NhcGVcIixcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cbiAgICB0aGlzLnByZXYgPSBjbG9uZSh0aGlzKTtcbiAgfVxuXG4gIHJlbW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgalF1aW5nb05vZGUgfSBmcm9tIFwiLi9ub2RlXCI7XG5pbXBvcnQgKiBhcyAkIGZyb20gXCJqcXVlcnlcIjtcbmltcG9ydCB7IGpRdWluZ29UZXh0Tm9kZSB9IGZyb20gXCIuL3RleHRfbm9kZVwiO1xuaW1wb3J0IHsgY2xvbmUgfSBmcm9tIFwibG9kYXNoXCI7XG5cbmV4cG9ydCBjbGFzcyBqUXVpbmdvQ29tcG9uZW50Tm9kZSBpbXBsZW1lbnRzIGpRdWluZ29Ob2RlIHtcbiAgcHVibGljIHByZXYhOiBqUXVpbmdvTm9kZTtcbiAgcHVibGljIHByZXZfY2hpbGRyZW46IEFycmF5PGpRdWluZ29Ob2RlPiA9IFtdO1xuICBwdWJsaWMgZWxlbWVudCE6IEhUTUxFbGVtZW50O1xuICBwdWJsaWMgdHlwZTogc3RyaW5nO1xuICBwdWJsaWMgcHJvcHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gIHB1YmxpYyBjaGlsZHJlbjogQXJyYXk8alF1aW5nb05vZGU+O1xuICBwdWJsaWMgcmVuZGVyZWQgPSBmYWxzZTtcbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlXG4gICAqIEBwYXJhbSBwcm9wc1xuICAgKiBAcGFyYW0gY2hpbGRyZW5cbiAgICpcbiAgICogSFRNTDpcbiAgICogPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgKiAgICA8aDE+SGVsbG8gV29ybGQ8L2gxPlxuICAgKiAgICA8ZGl2PlxuICAgKiAgICAgIDxhIGhyZWY9XCIvXCI+Q2xpY2sgTWUhPC9hPlxuICAgKiAgICA8L2Rpdj5cbiAgICogPC9kaXY+XG4gICAqIF4gdHJhbnNsYXRlcyB2XG4gICAqIGpRdWluZ29Db21wb25lbnQ6Y2xvbmVEZWVwXG4gICAqICAgIGNoaWxkcmVuOiBbXG4gICAqICAgICAge1xuICAgKiAgICAgICAgdHlwZTogXCJoMVwiXG4gICAqICAgICAgICBwcm9wczoge30sXG4gICAqICAgICAgICBjaGlsZHJlbjogW1xuICAgKiAgICAgICAgICBcIkhlbGxvIFdvcmxkXCJcbiAgICogICAgICAgIF1cbiAgICogICAgICB9LFxuICAgKiAgICAgIHtcbiAgICogICAgICAgIHR5cGU6IFwiZGl2XCJcbiAgICogICAgICAgIHByb3BzOiB7fSxcbiAgICogICAgICAgIGNoaWxkcmVuOiBbXG4gICAqICAgICAgICAgIHtcbiAgICogICAgICAgICAgICB0eXBlOiBcImFcIixcbiAgICogICAgICAgICAgICBwcm9wczoge1xuICAgKiAgICAgICAgICAgICAgaHJlZjogXCIvXCJcbiAgICogICAgICAgICAgICB9XG4gICAqICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICogICAgICAgICAgICAgIFwiQ2xpY2sgTWUhXCJcbiAgICogICAgICAgICAgICBdXG4gICAqICAgICAgICAgIH1cbiAgICogICAgICAgIF1cbiAgICogICAgICB9XG4gICAqICAgIF1cbiAgICogfVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIHByb3BzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LFxuICAgIC4uLmNoaWxkcmVuOiBBcnJheTxqUXVpbmdvTm9kZT5cbiAgKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudHlwZSk7XG5cbiAgICAkKHRoaXMuZWxlbWVudCkuYXR0cih0aGlzLnByb3BzKTtcblxuICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY29tcG9uZW50KSA9PiB7XG4gICAgICBjb21wb25lbnQucmVuZGVyKHRoaXMuZWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICAkKGNvbnRhaW5lcikuYXBwZW5kKHRoaXMuZWxlbWVudCk7XG5cbiAgICB0aGlzLnJlbmRlcmVkID0gdHJ1ZTtcbiAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gY2hpbGQucmVuZGVyZWQgPSB0cnVlKTtcblxuICAgIHRoaXMucHJldiA9IGNsb25lKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZShjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnJlbmRlcmVkKSB7XG4gICAgICB0aGlzLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAhKHRoaXMucHJldiBpbnN0YW5jZW9mIGpRdWluZ29Db21wb25lbnROb2RlKSB8fFxuICAgICAgdGhpcy50eXBlICE9PSB0aGlzLnByZXYudHlwZVxuICAgICkge1xuICAgICAgY29uc29sZS5pbmZvKFwic29tZXRoaW5nJ3MgdHlwZSB3YXMgY2hhbmdlZFwiKTtcbiAgICAgIHRoaXMucmVsb2FkKCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHByb3BlcnRpZXMgb2YgZWxlbWVudFxuICAgICQodGhpcy5lbGVtZW50KS5hdHRyKHRoaXMucHJvcHMpO1xuXG4gICAgLy8gQ2hlY2sgd2hldGhlciB0aGUgY2hpbGRyZW4ncyBvcmRlci90eXBlcyBoYXZlIGNoYW5nZWRcbiAgICBmb3IgKFxuICAgICAgbGV0IGkgPSAwO1xuICAgICAgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIHx8IGkgPCB0aGlzLnByZXZfY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgaSsrXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5jaGlsZHJlbltpXSAmJiB0aGlzLnByZXZfY2hpbGRyZW5baV0pIHtcbiAgICAgICAgLy8gVE9ETzogUGxlYXNlIGZpbmQgYSB3YXkgdG8gcmVmYWN0b3IgdGhpcyBtZXNzXG4gICAgICAgIGlmIChcbiAgICAgICAgICAodGhpcy5jaGlsZHJlbltpXSBpbnN0YW5jZW9mIGpRdWluZ29Db21wb25lbnROb2RlICYmXG4gICAgICAgICAgICB0aGlzLnByZXZfY2hpbGRyZW5baV0gaW5zdGFuY2VvZiBqUXVpbmdvQ29tcG9uZW50Tm9kZSAmJlxuICAgICAgICAgICAgKHRoaXMuY2hpbGRyZW5baV0gYXMgalF1aW5nb0NvbXBvbmVudE5vZGUpLnR5cGUgIT09XG4gICAgICAgICAgICAgICh0aGlzLnByZXZfY2hpbGRyZW5baV0gYXMgalF1aW5nb0NvbXBvbmVudE5vZGUpLnR5cGUpIHx8XG4gICAgICAgICAgKHRoaXMuY2hpbGRyZW5baV0gaW5zdGFuY2VvZiBqUXVpbmdvVGV4dE5vZGUgJiZcbiAgICAgICAgICAgIHRoaXMucHJldl9jaGlsZHJlbltpXSBpbnN0YW5jZW9mIGpRdWluZ29UZXh0Tm9kZSAmJlxuICAgICAgICAgICAgKHRoaXMuY2hpbGRyZW5baV0gYXMgalF1aW5nb1RleHROb2RlKS52YWx1ZSAhPT1cbiAgICAgICAgICAgICAgKHRoaXMucHJldl9jaGlsZHJlbltpXSBhcyBqUXVpbmdvVGV4dE5vZGUpLnZhbHVlKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zb2xlLmluZm8oXCJub2RlIHdhcyByZW1vdmVkXCIpO1xuICAgICAgICAgIHRoaXMucmVsb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGNoaWxkXG4gICAgICB0aGlzLmNoaWxkcmVuW2ldPy51cGRhdGUodGhpcy5lbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnByZXYgPSBjbG9uZSh0aGlzKTtcbiAgICAvLyBXb3JrYXJvdW5kLCB7Y2xvbmVEZWVwfSBjYXVzZXMgYSBiaWcgcGVyZm9ybWFuY2UgaGl0XG4gICAgLy8gQnV0IGFueSBvdGhlciBjbG9uZSAodGhhdCBpcyBub3QgY2F1c2luZyBhIGJpZyBwZXJmb3JtYW5jZSBoaXQpXG4gICAgLy8gRG9lc24ndCBzZWVtIHRvIGJlIGNsb25pbmcgdGhlIGNoaWxkcmVuIHdlbGxcbiAgICAodGhpcy5wcmV2IGFzIGpRdWluZ29Db21wb25lbnROb2RlKS5jaGlsZHJlbiA9IGNsb25lKHRoaXMuY2hpbGRyZW4pO1xuICAgIHRoaXMucHJldl9jaGlsZHJlbiA9IGNsb25lKHRoaXMuY2hpbGRyZW4pO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZSgpIHtcbiAgICAkKHRoaXMuZWxlbWVudCkucmVtb3ZlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbG9hZCgpIHtcbiAgICAvLyBDcmVhdGUgYSBuZXcgZWxlbWVudCBhbmQgb3ZlcnJpZGUgdGhlIGV4aXN0aW5nIGVsZW1lbnQgd2l0aCB0aGlzIG5ldyBlbGVtZW50XG4gICAgY29uc3QgbmV3X2VsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnR5cGUpO1xuICAgIC8vIFJlbmRlciBjaGlsZHJlbiB0byBuZXcgZWxlbWVudFxuICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IGNoaWxkLnJlbmRlcihuZXdfZWxlbWVudCkpO1xuICAgICQodGhpcy5lbGVtZW50KS5yZXBsYWNlV2l0aChuZXdfZWxlbWVudCk7XG4gICAgdGhpcy5lbGVtZW50ID0gbmV3X2VsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IGpRdWluZ28gfSBmcm9tIFwiLi4valF1aW5nb1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZVZhbHVlIH0gZnJvbSBcIi4uL29ic2VydmFibGVfdmFsdWVcIjtcbmltcG9ydCB7IGpRdWluZ29Ob2RlIH0gZnJvbSBcIi4vbm9kZVwiO1xuXG5leHBvcnQgY2xhc3MgalF1aW5nb0NvbXBvbmVudCB7XG4gIHByb3RlY3RlZCBub2RlczogalF1aW5nb05vZGVbXSA9IFtdO1xuICBwcml2YXRlIF9wcmV2X3RlbXBsYXRlOiBzdHJpbmcgPSBcIlwiO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGluaXQoKSB7fVxuXG4gIHB1YmxpYyB0ZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgcHVibGljIHJlbmRlcigpOiBqUXVpbmdvTm9kZVtdIHtcbiAgICBjb25zdCBuZXdfdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgaWYgKG5ld190ZW1wbGF0ZSAhPT0gdGhpcy5fcHJldl90ZW1wbGF0ZSkge1xuICAgICAgLy8gUmVtb3ZlIG9sZCBub2RlcyBmcm9tIFVJXG4gICAgICB3aGlsZSAodGhpcy5ub2Rlcy5sZW5ndGggPiAwKSB0aGlzLm5vZGVzLnBvcCgpPy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX3ByZXZfdGVtcGxhdGUgPSBuZXdfdGVtcGxhdGU7XG4gICAgfVxuICAgIGlmICh0aGlzLm5vZGVzLmxlbmd0aCA8IDEpIHtcbiAgICAgIC8vIE9ubHkgcmVuZGVyIGlmIHRoaW5ncyBoYXZlIGNoYW5nZWRcbiAgICAgIHRoaXMubm9kZXMgPSBqUXVpbmdvLmNyZWF0ZU5vZGUobmV3X3RlbXBsYXRlLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5ub2RlcztcbiAgfVxufVxuIiwiZXhwb3J0IGRlY2xhcmUgdHlwZSBPYnNlcnZhYmxlSWRlbnRpZmllciA9IG51bWJlcjtcblxuZXhwb3J0IGNsYXNzIE9ic2VydmFibGVWYWx1ZTxUPiB7XG4gIHByaXZhdGUgX3ZhbHVlOiBUO1xuICBwcml2YXRlIF9jYWxsYmFja3MgPSBuZXcgTWFwPE9ic2VydmFibGVJZGVudGlmaWVyLCB7ICh2YWx1ZTogVCk6IHZvaWQgfT4oKTtcbiAgY29uc3RydWN0b3IodmFsdWU6IFQpIHtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldCgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgc2V0KHZhbHVlOiBUKSB7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLm5vdGlmeSgpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZShjYWxsYmFjazogKHZhbHVlOiBUKSA9PiB2b2lkKSB7XG4gICAgY2FsbGJhY2sodGhpcy5fdmFsdWUpO1xuICAgIHRoaXMubm90aWZ5KCk7XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlKGNhbGxiYWNrOiB7ICh2YWx1ZTogVCk6IHZvaWQgfSk6IE9ic2VydmFibGVJZGVudGlmaWVyIHtcbiAgICAvLyBHZXQgbmV4dCBhdmFpbGFibGUgaWRlbnRpZmllclxuICAgIGNvbnN0IGlkZW50aWZpZXI6IE9ic2VydmFibGVJZGVudGlmaWVyID0gdGhpcy5fZ2V0QXZhaWxhYmxlSWRlbnRpZmllcigpO1xuXG4gICAgdGhpcy5fY2FsbGJhY2tzLnNldChpZGVudGlmaWVyLCBjYWxsYmFjayk7XG5cbiAgICAvLyBJbml0aWFsIGNhbGxiYWNrXG4gICAgY2FsbGJhY2sodGhpcy5fdmFsdWUpO1xuXG4gICAgcmV0dXJuIGlkZW50aWZpZXI7XG4gIH1cblxuICBwcml2YXRlIF9nZXRBdmFpbGFibGVJZGVudGlmaWVyKFxuICAgIGlkZW50aWZpZXI6IG51bWJlciA9IDBcbiAgKTogT2JzZXJ2YWJsZUlkZW50aWZpZXIge1xuICAgIGlmICh0aGlzLl9jYWxsYmFja3MuaGFzKGlkZW50aWZpZXIpKVxuICAgICAgcmV0dXJuIHRoaXMuX2dldEF2YWlsYWJsZUlkZW50aWZpZXIoaWRlbnRpZmllciArIDEpO1xuICAgIHJldHVybiBpZGVudGlmaWVyO1xuICB9XG5cbiAgcHVibGljIHVuc3Vic2NyaWJlKGlkZW50aWZpZXI6IE9ic2VydmFibGVJZGVudGlmaWVyKSB7XG4gICAgdGhpcy5fY2FsbGJhY2tzLmRlbGV0ZShpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHB1YmxpYyBub3RpZnkoKSB7XG4gICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG4gICAgICBjYWxsYmFjayh0aGlzLl92YWx1ZSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE9ic2VydmFibGVWYWx1ZSB9IGZyb20gXCIuLi9vYnNlcnZhYmxlX3ZhbHVlXCI7XG5pbXBvcnQgeyBqUXVpbmdvUm91dGUgfSBmcm9tIFwiLi9yb3V0ZVwiO1xuaW1wb3J0ICogYXMgJCBmcm9tIFwianF1ZXJ5XCI7XG5cbmV4cG9ydCBjbGFzcyBqUXVpbmdvUm91dGVyIHtcbiAgcHJpdmF0ZSByb3V0ZXM6IGpRdWluZ29Sb3V0ZVtdID0gW107XG4gIHB1YmxpYyBjdXJyZW50X3JvdXRlOiBPYnNlcnZhYmxlVmFsdWU8alF1aW5nb1JvdXRlPiA9IG5ldyBPYnNlcnZhYmxlVmFsdWUoXG4gICAgdGhpcy5yb3V0ZXNbMF1cbiAgKTtcblxuICBwdWJsaWMgcGF0aEV4aXN0cyhwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXMuZmluZCgoX3JvdXRlKSA9PiBfcm91dGUucGF0aCA9PT0gcGF0aCkgIT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHB1YmxpYyByb3V0ZVRvKHJvdXRlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBcIlwiLCByb3V0ZSk7XG4gICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICByZXR1cm4gdGhpcy5zZXRSb3V0ZShwYXRoKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRSb3V0ZShyb3V0ZTogalF1aW5nb1JvdXRlKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMucGF0aEV4aXN0cyhyb3V0ZS5wYXRoKSkgcmV0dXJuIGZhbHNlO1xuICAgIHRoaXMucm91dGVzLnB1c2gocm91dGUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZVJvdXRlKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5wYXRoRXhpc3RzKHBhdGgpKSByZXR1cm4gZmFsc2U7XG4gICAgdGhpcy5yb3V0ZXMuc3BsaWNlKFxuICAgICAgdGhpcy5yb3V0ZXMuaW5kZXhPZihcbiAgICAgICAgdGhpcy5yb3V0ZXMuZmluZCgoX3JvdXRlKSA9PiBfcm91dGUucGF0aCA9PT0gcGF0aCkgYXMgalF1aW5nb1JvdXRlXG4gICAgICApLFxuICAgICAgMVxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgc2V0Um91dGUocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLnBhdGhFeGlzdHMocGF0aCkpIHJldHVybiBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnRfcm91dGUuc2V0KFxuICAgICAgdGhpcy5yb3V0ZXMuZmluZCgoX3JvdXRlKSA9PiBfcm91dGUucGF0aCA9PT0gcGF0aCkgYXMgalF1aW5nb1JvdXRlXG4gICAgKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgcm91dGVyOiBqUXVpbmdvUm91dGVyID0gbmV3IGpRdWluZ29Sb3V0ZXIoKTtcblxuLy8gQ2FsbGVkIHdoZW4gdGhlIHVzZXIgaXMgZ29pbmcgYmFjayBhbmQgZm9ydGggdGhlIGJyb3dzZXIgc2Vzc2lvbiBoaXN0b3J5XG4kKHdpbmRvdykub24oe1xuICBwb3BzdGF0ZTogKF9lOiBFdmVudCkgPT4ge1xuICAgIHJvdXRlci5zZXRSb3V0ZSh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xuICB9LFxufSk7XG5cbiQoZG9jdW1lbnQpLm9uKHtcbiAgLy8gSW5pdGlhbGl6ZSByb3V0ZSB3aGVuIHRoZSB1c2VyIGZpcnN0IGVudGVycyB0aGUgd2Vic2l0ZVxuICBET01Db250ZW50TG9hZGVkOiAoX2U6IEV2ZW50KSA9PiB7XG4gICAgcm91dGVyLnNldFJvdXRlKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7XG4gIH0sXG4gIC8vIFdoZW4gYSB1c2VyIGNsaWNrcyBvbiBhbiBhbmNob3IgZWxlbWVudCB3aXRoIGEgaHJlZiwgcHJvdmlkZSBvdXIgb3duIGxvZ2ljXG4gIGNsaWNrOiAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgIGlmICghKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICByb3V0ZXIucm91dGVUbygoZS50YXJnZXQgYXMgSFRNTEFuY2hvckVsZW1lbnQpLmhyZWYpO1xuICB9LFxufSk7XG4iLCJpbXBvcnQgeyBqUXVpbmdvQ29tcG9uZW50IH0gZnJvbSBcIkBqcXVpbmdvL2NvbXBvbmVudC9jb21wb25lbnRcIjtcbmltcG9ydCB7IHJvdXRlciB9IGZyb20gXCIuL2pxdWluZ28vcm91dGVyL3JvdXRlclwiO1xuXG5jbGFzcyBqUXVpbmdvQXBwIGV4dGVuZHMgalF1aW5nb0NvbXBvbmVudCB7XG4gICAgdGVzdCA9IFwiSGVsbG8gV29ybGRcIlxuXG4gICAgcHVibGljIG92ZXJyaWRlIGluaXQoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50ZXN0ID0gXCJTb21ldGhpbmcgZWxzZVwiXG4gICAgICAgIH0sIDEwMDApO1xuICAgIH1cblxuICAgIC8vIFRPRE86IGV2ZW50IGhhbmRsZXJzXG4gICAgcHVibGljIHRlc3RmKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInRlc3RcIik7XG4gICAgfVxuXG4gICAgcHVibGljIG92ZXJyaWRlIHRlbXBsYXRlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAke3JvdXRlci5jdXJyZW50X3JvdXRlLmdldCgpLnJlbmRlcigpfVxuICAgICAgICBgO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFwcCA9IG5ldyBqUXVpbmdvQXBwKCk7IiwiaW1wb3J0IHsgalF1aW5nb0NvbXBvbmVudE5vZGUgfSBmcm9tIFwiLi9jb21wb25lbnQvY29tcG9uZW50X25vZGVcIjtcbmltcG9ydCB7IGpRdWluZ29Ob2RlIH0gZnJvbSBcIi4vY29tcG9uZW50L25vZGVcIjtcbmltcG9ydCB7IGpRdWluZ29UZXh0Tm9kZSB9IGZyb20gXCIuL2NvbXBvbmVudC90ZXh0X25vZGVcIjtcbmltcG9ydCAqIGFzICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCB7IGFwcCB9IGZyb20gXCJAc3JjL0FwcFwiO1xuXG5leHBvcnQgY2xhc3MgalF1aW5nbyB7XG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlTm9kZShfaHRtbD86IHN0cmluZywgX2VsZW1lbnQ/OiBFbGVtZW50KTogalF1aW5nb05vZGVbXSB7XG4gICAgY29uc3QgZWxlbWVudCA9IF9odG1sID8gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhfaHRtbCwgXCJ0ZXh0L2h0bWxcIikuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0gOiBfZWxlbWVudDtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybiBbXTtcblxuICAgIC8vIElmIGVsZW1lbnQgaGFzIG5vIGNoaWxkcmVuXG4gICAgaWYgKGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoIDwgMSkge1xuICAgICAgLy8gRWxlbWVudCBpcyB0ZXh0IHZhbHVlXG4gICAgICBjb25zdCBub2RlID0gbmV3IGpRdWluZ29UZXh0Tm9kZSgkKGVsZW1lbnQpLnRleHQoKSk7XG4gICAgICByZXR1cm4gW25vZGVdO1xuICAgIH1cblxuICAgIGxldCBub2RlczogalF1aW5nb05vZGVbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gQ2hpbGQgY29udGFpbnMgdGFnTmFtZSAodXNlZCBmb3Ige3R5cGV9KVxuICAgICAgY29uc3QgY2hpbGQgPSBlbGVtZW50LmNoaWxkcmVuW2ldO1xuXG4gICAgICBjb25zdCBub2RlID0gbmV3IGpRdWluZ29Db21wb25lbnROb2RlKGNoaWxkLnRhZ05hbWUsIHt9KTtcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjaGlsZC5hdHRyaWJ1dGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIC8vIEF0dHJpYnV0ZXMgY29udGFpbiBrZXkgdmFsdWUgcGFpcnMgZS5nLiBjbGFzcz1cImNsYXNzbmFtZVwiICh1c2VkIGZvciB7cHJvcHN9KVxuICAgICAgICBub2RlLnByb3BzW2NoaWxkLmF0dHJpYnV0ZXNbal0ubm9kZU5hbWVdID0gY2hpbGQuYXR0cmlidXRlc1tqXS5ub2RlVmFsdWUgfHwgJyc7XG4gICAgICB9XG5cbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuLmNvbmNhdCh0aGlzLmNyZWF0ZU5vZGUodW5kZWZpbmVkLCBjaGlsZCkpO1xuXG4gICAgICAvLyBBZGQgY2hpbGRyZW4gb2YgY2hpbGRcbiAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG5cbiAgcHVibGljIHJlbmRlckxvb3AoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGFwcC5yZW5kZXIoKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbm9kZS51cGRhdGUoY29udGFpbmVyKTtcbiAgICB9KTtcblxuICAgIC8vIFJlLXJ1biBldmVyeXRpbWUgbWFpbiB0aHJlYWQgaXMgaWRsZSAodG8gcHJldmVudCBibG9ja2luZyBVSSlcbiAgICByZXF1ZXN0SWRsZUNhbGxiYWNrKCgpID0+IHRoaXMucmVuZGVyTG9vcChjb250YWluZXIpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgalF1aW5nbyB9IGZyb20gXCIuL2pxdWluZ28valF1aW5nb1wiO1xuaW1wb3J0IHsgcm91dGVyIH0gZnJvbSBcIi4vanF1aW5nby9yb3V0ZXIvcm91dGVyXCI7XG5cbmNvbnN0IGpxdWluZ28gPSBuZXcgalF1aW5nbygpO1xuLy8gU3RhcnQgdGhlIG1haW4gcmVuZGVyIGxvb3BcbmpxdWluZ28ucmVuZGVyTG9vcChkb2N1bWVudC5ib2R5KTtcblxuIl0sIm5hbWVzIjpbInZhbHVlIiwicmVuZGVyZWQiLCJyZW5kZXIiLCJjb250YWluZXIiLCJhcHBlbmQiLCJ0aGlzIiwiYWxsb3dlZFRhZ3MiLCJhbGxvd2VkQXR0cmlidXRlcyIsInNlbGZDbG9zaW5nIiwiZGlzYWxsb3dlZFRhZ3NNb2RlIiwicHJldiIsImNsb25lIiwidXBkYXRlIiwialF1aW5nb1RleHROb2RlIiwiY29udGVudHMiLCJyZXBsYWNlV2l0aCIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJ0eXBlIiwicHJvcHMiLCJwcmV2X2NoaWxkcmVuIiwidG9Mb3dlckNhc2UiLCJjaGlsZHJlbiIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyIiwiZm9yRWFjaCIsImNvbXBvbmVudCIsImNoaWxkIiwialF1aW5nb0NvbXBvbmVudE5vZGUiLCJpbmZvIiwicmVsb2FkIiwiaSIsImxlbmd0aCIsIm5ld19lbGVtZW50Iiwibm9kZXMiLCJfcHJldl90ZW1wbGF0ZSIsImluaXQiLCJ0ZW1wbGF0ZSIsIm5ld190ZW1wbGF0ZSIsInBvcCIsImpRdWluZ28iLCJjcmVhdGVOb2RlIiwidW5kZWZpbmVkIiwiX2NhbGxiYWNrcyIsIk1hcCIsIl92YWx1ZSIsImdldCIsInNldCIsIm5vdGlmeSIsImNhbGxiYWNrIiwic3Vic2NyaWJlIiwiaWRlbnRpZmllciIsIl9nZXRBdmFpbGFibGVJZGVudGlmaWVyIiwiaGFzIiwidW5zdWJzY3JpYmUiLCJkZWxldGUiLCJyb3V0ZXIiLCJyb3V0ZXMiLCJjdXJyZW50X3JvdXRlIiwiT2JzZXJ2YWJsZVZhbHVlIiwicGF0aEV4aXN0cyIsInBhdGgiLCJmaW5kIiwiX3JvdXRlIiwicm91dGVUbyIsInJvdXRlIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzZXRSb3V0ZSIsImFkZFJvdXRlIiwicHVzaCIsInJlbW92ZVJvdXRlIiwic3BsaWNlIiwiaW5kZXhPZiIsIm9uIiwicG9wc3RhdGUiLCJfZSIsIkRPTUNvbnRlbnRMb2FkZWQiLCJjbGljayIsImUiLCJ0YXJnZXQiLCJIVE1MQW5jaG9yRWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwiaHJlZiIsImFwcCIsInRlc3QiLCJzZXRUaW1lb3V0IiwidGVzdGYiLCJqUXVpbmdvQ29tcG9uZW50IiwiX2h0bWwiLCJfZWxlbWVudCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsIm5vZGUiLCJ0ZXh0IiwidGFnTmFtZSIsImoiLCJhdHRyaWJ1dGVzIiwibm9kZU5hbWUiLCJub2RlVmFsdWUiLCJjb25jYXQiLCJyZW5kZXJMb29wIiwicmVxdWVzdElkbGVDYWxsYmFjayIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9